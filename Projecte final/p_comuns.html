<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Marc Balasch : Problemes Comuns</title>
</head>

<body>
    <section class="container">
        <header>
            <h1>Llenguatge C: Interaccions mitjançant la consola</h1>
        </header>
        <section>
            <nav class="menu">
                <ul>
                    <li><a href="index.html">Presentació</a></li>
                    <li><a href="contingut.html">Contingut</a></li>
                    <li><a href="galeria.html">Galeria</a></li>
                    <li><a href="p_comuns.html">Problemes comuns</a></li>
                    <li><a href="bibliografia.html">Bibliografia</a></li>
                </ul>
            </nav>
            <main>
                
            </main>
            
        </section>
        <footer>
            &copy; 2021 - Marc Balasch Blanch
        </footer>
    </section>
<script>
            function readTextFile(file, callback) {
    var rawFile = new XMLHttpRequest();
    rawFile.overrideMimeType("application/json");
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function() {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
            callback(rawFile.responseText);
        }
    }
    rawFile.send(null);
}

window.onload = function(){
    var data;

    readTextFile("http://localhost:5500/q&a.json", function(text){
        data = JSON.parse(text);
        const mainElement = document.querySelectorAll("main")[0];
        for(var i = 0; i<data.length; i++){
            var newQul = document.createElement("ul");
            var newQli = document.createElement("li");
            var newAul = document.createElement("ul");
            var newAli = document.createElement("li");

            newQul.className = "odd";
            newAul.className = "even";

            var textQ = document.createTextNode(data[i].question);
            var textA = document.createTextNode(data[i].answer);

            newQli.appendChild(textQ);
            newAli.appendChild(textA);
            newQul.appendChild(newQli);
            newAul.appendChild(newAli);

            mainElement.appendChild(newQul);
            mainElement.appendChild(newAul);
        }

    });
}
</script>
</body>

</html>